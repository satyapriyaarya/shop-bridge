(this["webpackJsonpshop-bridge"]=this["webpackJsonpshop-bridge"]||[]).push([[0],{20:function(t,e,c){},38:function(t,e,c){},61:function(t,e,c){"use strict";c.r(e);var s=c(0),n=c(1),a=c(30),i=c.n(a),r=(c(38),c(31)),o=c(12),l=c(13),d=c(15),u=c(14),m=c(10),h=(c(20),c(9)),j=c.n(h),p="https://shop-bridge-api.azurewebsites.net/api/",b="https://shop-bridge-api.azurewebsites.net/images/",O={GetProducts:function(){return j.a.get("".concat(p,"products"))},GetProduct:function(t){return j.a.get("".concat(p,"products/").concat(t))},AddProduct:function(t,e,c,s){var n={name:t,description:e,price:c,image:s};return console.log("SAVE:",n),j.a.post("".concat(p,"products"),n)},EditProduct:function(t,e,c,s,n){var a={id:t,name:e,description:c,price:s,image:n};return j.a.put("".concat(p,"products/").concat(t),a)},DeleteProduct:function(t){return j.a.delete("".concat(p,"products/").concat(t))},UploadFile:function(t,e){console.log("hehe:",t,e);var c=new FormData;return c.append("formFile",t),c.append("fileName",e),j.a.post("".concat(p,"products/image"),c)}};var x=function(t){Object(d.a)(c,t);var e=Object(u.a)(c);function c(t){var s;return Object(o.a)(this,c),(s=e.call(this,t)).getAllProducts=function(){return O.GetProducts().then((function(t){s.setState({products:t.data})})).catch((function(t){return console.log("Error",t)}))},s.isEmptyOrNull=function(t){return""===(t=void 0===t||null==t?"":t.toString().trim())},s.handleOnChange=function(t){s.setState(Object(r.a)({},t.target.name,t.target.value))},s.handleOnChangeFile=function(t){console.log("image:",t.target.files[0]),s.setState({image:t.target.files[0].name}),O.UploadFile(t.target.files[0],t.target.files[0].name).then((function(t){}))},s.AddProducts=function(){if(console.log(s.state.price),s.setState({valid:!0}),s.isEmptyOrNull(s.state.name)?s.setState({classForName:"form-control txt required",valid:!1}):s.setState({classForName:"form-control txt"}),s.isEmptyOrNull(s.state.name)||s.isEmptyOrNull(s.state.description)||s.isEmptyOrNull(s.state.price))console.log("Invalid");else{var t=0;s.state.editMode?(t=s.state.products&&s.state.products.length>0?s.state.products.filter((function(t){return t.id===s.state.id}))[0].id:1,console.log("satya:",t),O.EditProduct(t,s.state.name,s.state.description,parseFloat(s.state.price),s.state.image).then((function(t){s.setState({products:s.getAllProducts(),id:"",name:"",description:"",price:0,image:null,editMode:!1})}))):O.AddProduct(s.state.name,s.state.description,parseFloat(s.state.price),s.state.image).then((function(t){s.setState({products:s.getAllProducts(),id:"",name:"",description:"",price:0,image:null,editMode:!1})}))}},s.onEdit=function(t){var e=s.state.products&&s.state.products.length>0&&s.state.products.filter((function(e){return e.id===t}));s.setState({id:e[0].id,name:e[0].name,description:e[0].description,price:e[0].price,image:e[0].image,editMode:!0})},s.delete=function(t){O.DeleteProduct(t).then((function(t){s.setState({products:s.getAllProducts(),editMode:!1})}))},s.cancel=function(){s.setState({id:"",name:"",description:"",price:0,image:null,editMode:!1})},s.state={products:[],id:"",name:"",description:"",price:0,image:null,classForName:"form-control txt",classForDesscription:"form-control txt",classForPrice:"form-control txt",valid:!1,editMode:!1},s}return Object(l.a)(c,[{key:"componentDidMount",value:function(){this.setState({products:this.getAllProducts()})}},{key:"render",value:function(){var t=this;return Object(s.jsx)(n.Fragment,{children:Object(s.jsxs)("header",{className:"container",children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-sm-6",children:Object(s.jsx)("input",{name:"name",className:this.state.classForName,maxLength:"100",placeholder:"Product name",value:this.state.name,onChange:function(e){return t.handleOnChange(e)}})}),Object(s.jsx)("div",{className:"col-sm-6",children:Object(s.jsx)("input",{type:"number",name:"price",className:this.state.classForPrice,placeholder:"Price",value:this.state.price,onChange:function(e){return t.handleOnChange(e)}})}),Object(s.jsx)("div",{className:"col-sm-6",children:Object(s.jsx)("textarea",{name:"description",className:this.state.classForDesscription,rows:"5",maxLength:"1000",placeholder:"Desctiption",value:this.state.description,onChange:function(e){return t.handleOnChange(e)}})}),Object(s.jsx)("div",{className:"col-sm-6",children:Object(s.jsx)("input",{type:"file",name:"image",className:"form-control txt",placeholder:"Image",onChange:function(e){return t.handleOnChangeFile(e)}})})]}),Object(s.jsx)("div",{className:"row",children:this.state.editMode?Object(s.jsxs)(n.Fragment,{children:[Object(s.jsx)("button",{name:"edit",className:"form-control btn primary-btn",onClick:function(){return t.AddProducts()},children:"Update"}),Object(s.jsx)("button",{name:"cancel",className:"form-control btn primary-btn",onClick:function(){return t.cancel()},children:"Cancel"})]}):Object(s.jsx)("button",{name:"add",className:"form-control btn primary-btn",onClick:function(){return t.AddProducts()},children:"Add"})}),Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("h2",{children:"List of products"}),(!this.state.products||0===this.state.products.length)&&Object(s.jsx)("div",{children:"No products addded yet"}),this.state.products&&this.state.products.length>0&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-sm-1",children:Object(s.jsx)("label",{children:"ID"})}),Object(s.jsx)("div",{className:"col-sm-2",children:Object(s.jsx)("label",{children:" Name"})}),Object(s.jsx)("div",{className:"col-sm-3",children:Object(s.jsx)("label",{children:"Description"})}),Object(s.jsx)("div",{className:"col-sm-1",children:Object(s.jsx)("label",{children:"Price"})}),Object(s.jsx)("div",{className:"col-sm-2",children:Object(s.jsx)("label",{children:"Image"})}),Object(s.jsx)("div",{className:"col-sm-2",children:Object(s.jsx)("label",{children:"Action"})}),Object(s.jsx)("div",{className:"col-sm-1",children:Object(s.jsx)("label",{})})]}),this.state.products.map((function(e,c){return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-sm-1",children:Object(s.jsx)("label",{children:e.id})}),Object(s.jsx)("div",{className:"col-sm-2",children:Object(s.jsxs)(m.b,{to:"/product-detail/".concat(e.id),children:[e.name.slice(0,50)," ",e.name.length>50&&" ..."]})}),Object(s.jsx)("div",{className:"col-sm-3",children:Object(s.jsxs)("label",{children:[e.description.slice(0,100)," ..."]})}),Object(s.jsx)("div",{className:"col-sm-1",children:Object(s.jsx)("label",{children:e.price.toFixed(2)})}),Object(s.jsx)("div",{className:"col-sm-2",children:Object(s.jsx)("img",{src:e.image?"".concat(b).concat(e.image):"".concat(b,"noimg.png"),alt:"no ",width:"60px"})}),Object(s.jsx)("div",{className:"col-sm-2",children:Object(s.jsx)("button",{name:"edit",className:"form-control btn",onClick:function(){return t.onEdit(e.id)},children:"Edit"})}),Object(s.jsx)("div",{className:"col-sm-1",children:Object(s.jsx)("button",{name:"delete",className:"form-control btn",onClick:function(){return t.delete(e.id)},children:"Delete"})})]},c)}))]})]})]})})}}]),c}(n.Component),g=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(e){var c=e.getCLS,s=e.getFID,n=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),s(t),n(t),a(t),i(t)}))},f=c(2),v=function(t){Object(d.a)(c,t);var e=Object(u.a)(c);function c(t){var s;return Object(o.a)(this,c),(s=e.call(this,t)).getProduct=function(t){return O.GetProduct(t).then((function(t){s.setState({product:t.data})})).catch((function(t){return console.log("Error",t)}))},s.state={product:[]},s}return Object(l.a)(c,[{key:"componentDidMount",value:function(){console.log("ID:",this.props.match.params.id),this.setState({product:this.getProduct(this.props.match.params.id)})}},{key:"render",value:function(){return Object(s.jsx)(n.Fragment,{children:Object(s.jsxs)("header",{className:"container",children:[Object(s.jsx)(m.b,{to:"/",children:"Back"}),Object(s.jsxs)("div",{className:"col",children:[(!this.state.product||0===this.state.product.length)&&Object(s.jsx)("div",{children:"No product Exits"}),this.state.product&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("h2",{children:["Product Detail - ",this.state.product.name]}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("label",{children:["ID: ",this.state.product.id]})}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("label",{children:[" Name: ",this.state.product.name]})}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("label",{children:["Description: ",this.state.product.description]})}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("label",{children:["Price: ",this.state.product.price]})}),Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("label",{children:[" ",Object(s.jsx)("img",{src:this.state.product.image?"".concat(b).concat(this.state.product.image):"".concat(b,"noimg.png"),alt:"no ",width:"500px"})," "]})})]})]})]})})}}]),c}(n.Component),N=Object(f.e)(v);i.a.render(Object(s.jsxs)(m.a,{children:[Object(s.jsx)(f.a,{exact:!0,path:"/",component:x}),Object(s.jsx)(f.a,{path:"/product-detail/:id",component:N})]}),document.getElementById("root")),g()}},[[61,1,2]]]);
//# sourceMappingURL=main.3201e3f4.chunk.js.map